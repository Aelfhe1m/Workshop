// Adding dirt to stock holding tanks, scanners and drills

@PART[LargeTank]:FOR[Workshop]
{
  	-RESOURCE[Ore]{}
	MODULE
	{
    		name = FSfuelSwitch
		resourceNames = Ore;Dirt
		resourceAmounts = 1500;1500
		initialResourceAmounts = 0;0
		tankCost = 30;450
		basePartMass = 2
		tankMass = 0,0
	}
}


@PART[SmallTank]:FOR[Workshop]
{
  	-RESOURCE[Ore]{}
	MODULE
	{
    		name = FSfuelSwitch
		resourceNames = Ore;Dirt
		resourceAmounts = 300;300
		initialResourceAmounts = 0;0
		tankCost = 6;90
		basePartMass = 0.5
		tankMass = 0,0
	}
}

@PART[RadialOreTank]:FOR[Workshop]
{
	-RESOURCE[Ore]{}
	MODULE
	{
    		name = FSfuelSwitch
		resourceNames = Ore;Dirt
		resourceAmounts = 75;75
		initialResourceAmounts = 0;0
		tankCost = 1.5;22.5
		basePartMass = 0.125
		tankMass = 0,0
	}
	
}

@PART[MiniDrill]:FOR[Workshop]
{
	MODULE
	{
		name = ModuleResourceHarvester
		HarvesterType = 0
		Efficiency = 0.3
		ResourceName = Dirt
		ConverterName = Dirt Harvester
		StartActionName = Start Dirt Harvester
		StopActionName = Stop Dirt Harvester
		ImpactTransform = ImpactTransform
		ImpactRange = 5
		AutoShutdown = true
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Engineer
		EfficiencyBonus = 1
		GeneratesHeat = true
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 3
		}
		TemperatureModifier
		{
			key = 0 10000
			key = 250 5000
			key = 500 2500
			key = 750 250
			key = 1000 0
		}		
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Engineer
		EfficiencyBonus = 1
		ThermalEfficiency 
		{
			key = 0 0.1
			key = 250 .1
			key = 500 1
			key = 750 .1
			key = 1000 0
		}
		HarvestThreshold = 0.025
	}
	RESOURCE
	{
		name = Dirt
		amount = 0
		maxAmount = 15
	}
	RESOURCE
	{
		name = Ore
		amount = 0
		maxAmount = 15
	}
}

@PART[RadialDrill]:FOR[Workshop]
{
	MODULE
	{
		name = ModuleResourceHarvester
		HarvesterType = 0
		Efficiency = 1.5
		ResourceName = Dirt
		ConverterName = Dirt Harvester
		StartActionName = Start Dirt Harvester
		StopActionName = Stop Dirt Harvester
		ImpactTransform = ImpactTransform
		ImpactRange = 5
		AutoShutdown = true
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Engineer
		EfficiencyBonus = 1
		GeneratesHeat = true
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 15
		}
		TemperatureModifier
		{
			key = 0 10000
			key = 250 7500
			key = 500 5000
			key = 750 500
			key = 1000 0
		}		
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Engineer
		EfficiencyBonus = 1
		ThermalEfficiency 
		{
			key = 0 0.1
			key = 250 .1
			key = 500 1
			key = 750 .1
			key = 1000 0
		}
	}

	RESOURCE
	{
		name = Dirt
		amount = 0
		maxAmount = 75
	}
	RESOURCE
	{
		name = Ore
		amount = 0
		maxAmount = 75
	}
}

@PART[OrbitalScanner]:FOR[Workshop]
{
  MODULE
  {
    name = ModuleResourceScanner
    MaxAbundanceAltitude = 500000
    RequiresUnlock = true
    ScannerType = 0
    ResourceName = Dirt
  }
}

@PART[SurfaceScanner]:FOR[Workshop]
{
  MODULE
  {
    name = ModuleResourceScanner
    ScannerType = 0
    ResourceName = Dirt
    MaxAbundanceAltitude = 1000
    RequiresUnlock = false
  }
}

// 3D Printing capability to the stock Lab Module
@PART[Large_Crewed_Lab]:FOR[Workshop]
{
  MODULE
  {
    name = OseModuleWorkshop
    ProductivityFactor = 0.1; // How much units of the resource a processed per second
    UpkeepResource = ElectricCharge // This resource will be consumed 1 per second during processing
    MinimumCrew = 2 // Amount of Kerbals needed for the Workshop to work
    MaxPartVolume = 300 // Parts need to be smaller than this to be craftable
    Animate = false // Only use on dedicated Workshop that comes with this mod
   }
}


// Inventory preference option to parts with KIS inventories

@PART[*]:HAS[@MODULE[ModuleKISInventory]]:FINAL
{
  MODULE
  {
    name = OseModuleInventoryPreference 
  }
}


// Productivity for ExtraplanetaryLaunchpads

@PART[OSE_Workshop]:NEEDS[Launchpad] 
{
  MODULE[ExWorkshop]
  {
    ProductivityFactor = 5
  }
}


// Icon for the AlternateResourcePanel

RESOURCE_DEFINITION[MaterialKits]
{
  ksparpicon = Workshop/Assets/MKitsIcon
}
