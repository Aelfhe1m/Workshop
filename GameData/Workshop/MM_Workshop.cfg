// Adding dirt to stock holding tanks, scanners and drills

@PART[LargeTank]:FOR[Workshop]
{
  -RESOURCE[Ore]{}
  RESOURCE
  {
    name = Ore
    amount = 0
    maxAmount = 750
  }
  RESOURCE
  {
    name = Dirt
    amount = 0
    maxAmount = 750
  }
}


@PART[SmallTank]:FOR[Workshop]
{
  -RESOURCE[Ore]{}
  RESOURCE
  {
    name = Ore
    amount = 0
    maxAmount = 150
  }
  RESOURCE
  {
    name = Dirt
    amount = 0
    maxAmount = 150
  }
}

@PART[RadialDrill]:FOR[Workshop]
{
  MODULE
	{
		name = ModuleResourceHarvester
		HarvesterType = 0
		Efficiency = 1
		ResourceName = Dirt
		ConverterName = Dirt Harvester
		StartActionName = Start Dirt Harvester
		StopActionName = Stop Dirt Harvester
		ImpactTransform = 
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		Specialty = Scientist
		EfficiencyBonus = 1
		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 2
		}
	}
}

@PART[OrbitalScanner]:FOR[Workshop]
{
  MODULE
  {
    name = ModuleResourceScanner
    MaxAbundanceAltitude = 500000
    RequiresUnlock = true
    ScannerType = 0
    ResourceName = Dirt
  }
}

@PART[SurfaceScanner]:FOR[Workshop]
{
  MODULE
  {
    name = ModuleResourceScanner
    ScannerType = 0
    ResourceName = Dirt
    MaxAbundanceAltitude = 1000
    RequiresUnlock = false
  }
}

// 3D Printing capability to the stock Lab Module
@PART[Large_Crewed_Lab]:FOR[Workshop]
{
  MODULE
  {
    name = OseModuleWorkshop
    ConversionRate = 1 // How much of a parts mass needs to be processed until it is done
    ProductivityFactor = 0.1; // How much units of the resource a processed per second
    UpkeepResource = ElectricCharge // This resource will be consumed 1 per second during processing
    InputResource = MaterialKits // This resource will be used to process the items
    MinimumCrew = 2 // Amount of Kerbals needed for the Workshop to work
    MaxPartVolume = 300 // Parts need to be smaller than this to be craftable
    Animate = false // Only use on dedicated Workshop that comes with this mod
   }

  RESOURCE
  {
    name = MaterialKits
    amount = 0
    maxAmount = 270
    isTweakable = true
  }
  RESOURCE
  {
    name = RareMetals
    amount = 0
    maxAmount = 25
    isTweakable = true
  }
  RESOURCE
  {
    name = ExoticMinerals
    amount = 0
    maxAmount = 80
    isTweakable = true
  }
}


// Inventory preference option to parts with KIS inventories

@PART[*]:HAS[@MODULE[ModuleKISInventory]]:FINAL
{
  MODULE
  {
    name = OseModuleInventoryPreference 
  }
}


// Productivity for ExtraplanetaryLaunchpads

@PART[OSE_Workshop]:NEEDS[Launchpad] 
{
  MODULE[ExWorkshop]
  {
    ProductivityFactor = 5
  }
}


// Icon for the AlternateResourcePanel

RESOURCE_DEFINITION[MaterialKits]
{
  ksparpicon = Workshop/Assets/MKitsIcon
}
